/*! 
 * ec-shared v3.47.1.1
 * https://dev.esewa.com.np
 * Copyright (c) 2022 eSewa Developers <developers@esewa.com.np>
 * License: eSewa
+; * Version: 3.47.1.1
+; */
(function (jQuery, window, angular, undefined) { 'use strict';!function(a,b,c,d){"use strict";!function(){var a,b="angularUtils.directives.uiBreadcrumbs",e="directives/uiBreadcrumbs/uiBreadcrumbs.tpl.html";try{a=c.module(b)}catch(f){a=c.module(b,["ui.router"])}a.directive("uiBreadcrumbs",["$interpolate","$state","$rootScope",function(a,b,f){return{restrict:"E",templateUrl:function(a,b){return b.templateUrl||e},scope:{displaynameProperty:"@",abstractProxyProperty:"@?"},link:function(e){function f(){for(var a,c,d=[],f=b.$current;f&&""!==f.name;)a=g(f),a&&(!1===(c=h(a))||j(a,d)||d.push({displayName:c,route:a.name})),f=f.parent;d.reverse(),e.breadcrumbs=d}function g(a){var c,d=a;return!0===a.abstract&&(void 0!==e.abstractProxyProperty?(c=i(e.abstractProxyProperty,a),d=!!c&&b.get(c)):d=!1),d}function h(b){var c,d;return e.displaynameProperty?!1!==(d=i(e.displaynameProperty,b))&&(void 0===d?b.name:(c=void 0!==b.locals?b.locals.globals:b,a(d)(c))):b.name}function i(a,b){var e,f=a.split("."),g=b;for(e=0;e<f.length;e++){if(!c.isDefined(g[f[e]]))return d;g=g[f[e]]}return g}function j(a,b){var c,d=!1;for(c=0;c<b.length;c++)b[c].route===a.name&&(d=!0);return d}e.breadcrumbs=[],""!==b.$current.name&&f(),e.$on("$stateChangeSuccess",function(){f()})}}}])}(),c.module("esewaSharedApp",["restangular","ui.bootstrap","ngStorage","esewaMessages"]).run(["$rootScope","$state","$localStorage","$http","InformationService","$timeout","$sce","$location","StateConstant","CDNUrl","Restangular","ecmsg","MessageConstant","AUTH_EVENTS","$cookies","RegexConstant","CommonService","$window",function(a,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){function u(){var a=document.querySelector(".offline-alert-box");a&&a.classList.toggle("hidden")}function v(a){return r.ipAddress.test(a)}function w(a){return a.split(".").pop()}f.get(l.url+"/data/makePaymentUrls.json").then(function(b){a.makePaymentUrls=b.data}),t.addEventListener("offline",function(){u()}),t.addEventListener("online",function(){u()}),a.getImage=function(a){return l.url+"/images/"+a},a.isActive=function(a){return a===j.path()},a.handleMiniLoadingBar=function(a,b){var d=c.element(document.querySelector("#"+a));b&&d?c.element(document.querySelector("#"+a)).addClass("ec-mini-loading-bar").removeClass("hidden"):c.element(document.querySelector("#"+a+".ec-mini-loading-bar")).removeClass("ec-mini-loading-bar").addClass("hidden")};var x={};m.setFullRequestInterceptor(function(b,c,d,e,f,g,h){var i=q.get("XSRF-TOKEN");i&&(f["X-XSRF-TOKEN-ES"]=i),h.selfHandleLoadingBar||(h.miniLoadingBarId?(x[d]={},x[d].miniLoadingBarId=h.miniLoadingBarId,x[d].route=d,delete h.miniLoadingBarId,a.handleMiniLoadingBar(x[d].miniLoadingBarId,!0)):a.showLoadingBar=!0)}),m.addResponseInterceptor(function(b,c,d,e,f,g){return a.showLoadingBar=!1,a.disableSubmit=!1,x.hasOwnProperty(d)&&(a.handleMiniLoadingBar(x[d].miniLoadingBarId,!1),x={}),b}),m.setErrorInterceptor(function(b,c,d){if(a.showLoadingBar=!1,a.disableSubmit=!1,403===b.status){if(h(function(){a.logout()},2e3),_.includes(b.config.url,"/api/web/auth/balance")||_.includes(b.config.url,"/api/web/auth/reward_point")||_.includes(b.config.url,"/api/web/auth/change_password"))return!0;var e=_.isObject(b)?b.data.error_message||b.data.message||b.message:b.message;n.error(e)}return!0}),a.StateConstant=k,a.message={error:"",success:"",information:"",show:!1},a.$state=d,a.StateConstant=k,a.$storage=e,a.isVerfiedPrimaryUser=function(){var a=e.profile||{};return a.isPrimary&&a.isVerified},a.isVerfiedUser=function(){var b=e.profile||{};if(a.isLoggedIn()&&a.isUser())return b.isVerified},a.isPrimaryPoint=function(){return(a.$storage.user||{}).isPrimary||!1},a.successResponse={message:""},a.showErrorMessage=function(){return!(""===a.message.error||!c.isDefined(a.message.error))&&!(d.current.name.startsWith("auth")&&a.isAuthenticated())},a.isAuthenticated=function(){return a.isLoggedIn()},a.getStateConstant=function(b){f.get(l.url+"/data/propertyConstant.json").then(function(c){a.PropertyConstant=c.data,"function"==typeof b&&b(c)})},a.getStateConstant(),a.isUser=function(){var a=e.profile||{};return c.isDefined(a.isVerified)},a.goToState=function(b,c){var e="";a.isAuthenticated()||(e=d.href(b,c,{absolute:!1}),b.indexOf("airline.new_search")>-1&&(e="/#/airline/newsearch"),b.indexOf("merchant")>-1&&(b.indexOf("airlines")>-1?e="/#/airlines/search":-1===b.indexOf("statements")&&(e="/#/make_payment/"+c.product_code+"/"+c.product_name))),a.isAuthenticated()?b?("organization.make_payment"===d.current.name&&"merchant.makePayment.secondStep"===b&&(b="organization.make_payment.secondStep"),d.go(b,c)):d.go(k.HOME_MAIN):a.openLoginDialog(e)},a.isDevEnvironment=function(){var a=j.$$host;return v(a)&&"16"===w(a)||"dev.esewa.com.np"===a||"dev-org.esewa.com.np"===a},a.isQaDevEnvironment=function(){var a=j.$$host;return v(a)&&"19"===w(a)||"qadev.esewa.com.np"===a||"qadev-org.esewa.com.np"===a},a.isRcEnvironment=function(){var a=j.$$host;return v(a)&&"23"===w(a)||"rc.esewa.com.np"===a||"rc-org.esewa.com.np"===a},a.isPreProdEnvironment=function(){var a=j.$$host;return"ir.esewa.com.np"===a||"ir-org.esewa.com.np"===a},a.isDevelopmentMode=function(){return!(a.isPreProdEnvironment()||a.isProdEnvironment())},a.isProdEnvironment=function(){var a=j.$$host;return"esewa.com.np"===a||"org.esewa.com.np"===a},a.$on("$stateChangeError",function(b,c,e,f,g,h){h===p.notAuthorized&&(a.showErrorSuccessMessage(o.notAuthorized,!0,"",!0),d.go("main"))}),a.isOrg=function(){return!!e.user},a.isAgent=function(){return!!e.user&&e.user.isAgentWithdraw},a.isPoint=function(){return!!e.user&&"POINT"===e.user.organizationType},a.isZone=function(){return!!e.user&&"ZONE"===e.user.organizationType},a.setDocumentTitle=function(a){var b=a||" Digital wallet in Nepal for Online payment services";document.title="eSewa | "+a,t.trackLogEvent&&t.trackLogEvent({eventTitle:b,eventType:"page_view"})},t.addEventListener("appinstalled",function(){t.trackLogEvent&&t.trackLogEvent({eventTitle:"App installed (PWA)",eventType:"PWA_APP_INSTALL"})}),a.$on("$stateChangeStart",function(b,c){a.message={},s.isOfTypeObject(c.data)&&a.setDocumentTitle(c.data.displayName);var d=c.data||{},f=d.accessRole||[];if(f.length){var g,h=e.user;if(h)switch(h.organizationType){case"POINT":g=1;break;case"ZONE":g=2;break;case"ESEWA_CENTER":g=3;break;case"SUPERZONE":g=4}else g=0;f.includes(g)||(a.showErrorSuccessMessage(o.notAuthorized,!0,"",!0),b.preventDefault())}}),a.$on(p.information,function(){var b=e.profile||{};(!a.isLoggedIn()||a.isLoggedIn()&&b.isPrimary)&&g.getInformation(a.informationKey).then(function(b){a.information=b.plain(),h(function(){a.information.information&&(a.showInformation=!0)},100),a.trustedHtml=i.trustAsHtml(a.information.information)})}),function(){return b.matchMedia("(display-mode: standalone)").matches||b.navigator.standalone||document.referrer.includes("android-app://")}()&&console.log("webapp is installed")}]),c.module("esewaSharedApp").config(["ecmsgConfig",function(a){c.extend(a,{autoDismiss:!1,containerId:"ecmsg-container",maxOpened:0,newestOnTop:!0,positionClass:"ecmsg-toast ecmsg-top-right",closeButton:!0,progressBar:!0,preventOpenDuplicates:!0,target:"body"})}]),c.module("esewaSharedApp").config(["RestangularProvider","$sceDelegateProvider","CDNUrl",function(a,b,c){a.setBaseUrl("/api/web"),b.resourceUrlWhitelist(["self",c.url+"/html/**",c.url+"/html/*/**","https://nabiltest.compassplus.com:8844/**","https://nabiltest.compassplus.com/**"])}]),c.module("esewaSharedApp").config(["$stateProvider","$urlRouterProvider","CDNUrl",function(a,b,c){function d(a){return c.url+a}a.state("download",{url:"/download",templateUrl:c.url+"/html/templates/download_esewa.html"}).state("allNotification",{url:"/notifictions",templateUrl:"user/notification/all_notification.html",controller:"NotificationController",data:{displayName:"Notification"}}).state("faq",{url:"/faq/:faqTopic",templateUrl:d("/html/templates/genericFAQ_3.36.0.html"),controller:"FAQController"}).state("serviceList",{url:"/service-list/:service_type",templateUrl:d("/html/templates/service/service_list_3.39.0.html"),controller:"ServiceListController"}).state("miscellaneousState",{url:"additional-details/:service_type",templateUrl:d("/html/templates/miscellaneous_state.html"),controller:"MiscellaneousStateController"}).state("registerMerchant",{url:"/register-merchant",templateUrl:d("/html/register_merchant.html"),data:{searchParams:["register merchant"],displayName:"Register Merchant",icon:"icon-es-become-merchant"}})}]),c.module("esewaSharedApp").config(["$httpProvider","datepickerConfig",function(a,b){b.showWeeks=!1,a.interceptors.push(["$rootScope","$q","AUTH_EVENTS","CDNUrl","ecmsg","$cookies",function(a,b,d,e,f,g){return{request:function(d){if(!a.isAuthenticated()&&d.url.includes("/api/web/auth/"))return b.reject({error:"restricted",config:d});if(d.headers.miniLoadingBarId){var f=d.headers.miniLoadingBarId;a.handleMiniLoadingBar(f,!0)}if(!c.isDefined(a.isLoggedIn))return d;if(!_.includes(d.url,e.url)){if(a.isLoggedIn()&&(_.includes(d.url,"auth")||_.includes(d.url,"/logout")||_.includes(d.url,"/airlines"))){var h=g.get("authesewa");h&&(d.headers.uuid=h.split(":")[1])}a.isLoggedIn()&&(d.headers["X-XSRF-TOKEN-ES"]=g.get("XSRF-TOKEN"))}return(d.url.indexOf("ui/html/payment/firstStep")>-1||d.url.indexOf("ui/html/TOPUP_")>-1||d.url.indexOf("ui/html/payment/payment_confirm_")>-1)&&(a.showMerchantFormLoading=!0),d.url.startsWith(e.url)&&a.isDevelopmentMode()?d.url+="?rel="+(new Date).getTime():_.includes(d.url,"/documents")&&_.includes(d.url,".jpg")&&(d.headers.CacheControl="no-cache"),a.disableSubmit=!0,d},response:function(b){if((b.config.url.indexOf("api/web/payment_menus/products")>-1||b.config.url.indexOf("ui/html/payment/firstStep")>-1||b.config.url.indexOf("ui/html/TOPUP_")>-1||b.config.url.indexOf("ui/html/payment/payment_confirm_")>-1)&&(a.showMerchantFormLoading=!1,a.showPageNotFound=!1),b.config.headers.miniLoadingBarId){var c=b.config.headers.miniLoadingBarId;a.handleMiniLoadingBar(c,!1)}if(a.disableSubmit=!1,a.makePaymentUrls)for(var e in a.makePaymentUrls)if(b.config.url.indexOf(e)>-1){a.$broadcast(d.notificationCount);break}return b},responseError:function(e){e.config.url.indexOf("ui/html/payment/firstStep")>-1&&(a.showMerchantFormLoading=!1,a.showPageNotFound=!0);var g=e.status;if(a.showLoadingBar=!1,!_.includes(e.config.url,"reg")&&!_.includes(e.config.url,"authenticate")&&!_.includes(e.config.url,"forgot_password")){if(a.message={error:""},401===g||403===g)a.$broadcast(d.notAuthorized),a.message.error&&(_.includes(e.config.url,"payment_menus")||_.includes(e.config.url,"/products/showcase")||f.error(a.message.error,""));else if(500===g)return f.error("Sorry, something went wrong.",""),b.reject(e);""!==a.message.error&&c.isDefined(a.message.error)&&(a.message.error?(f.error(a.message.error,""),document.body.scrollTop=document.documentElement.scrollTop=0):c.isDefined(e.data.error_message)&&(_.includes(e.config.url,"make_payment")||_.includes(e.config.url,"payment")||_.includes(e.config.url,"validate")?a.message.error=e.data.error_message:_.includes(e.config.url,"payment_menus")||_.includes(e.config.url,"/products/showcase")||f.error(e.data.error_message,"")))}return b.reject(e)}}}])}]),c.module("esewaSharedApp").constant("IdentityConstant",{CTZN:"Citizenship",LICENSE:"Driving License",PASSPORT:"Passport",VOTERID:"Voter Id"}),c.module("esewaSharedApp").constant("RegexConstant",{ipAddress:/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,landline:/^[1-9][0-9]\d{6}$/,landline9:/^[0][1-9]\d{7}$/,startZero:/^[0][0]\d{0,100}$/,fullname:/^[a-zA-Z]{1,30}[\s][a-zA-Z]{1,30}[ a-zA-Z]{0,30}$/,mobileNo:/^[9][6-8][0-9]\d{7}$/,email:/^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+|[9][8][0-9]{8}$|[9][7][0-9]{8}$|[9][7][5][0-9]{7}$|[9][8][4|6][0-9]{7}$|[9][8][5][0-9]{7}$|[9][8][0][1-2][0-9]{6}$|[9][8][0-1][0-9]{7}$/,panNo:/^\d{4,15}$/,ward:/^(0?[1-9]|[1-9][0-9])$/,tole:/^[a-zA-Z0-9- */]{3,30}$/,dob:/^\d{4}\-(0?[1-9]|1[012])\-(0?[1-9]|[12][0-9]|3[01])$/,username:/^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+|[9][8][0-9]{8}$|[9][7][0-9]{8}$|[9][7][5][0-9]{7}$|[9][8][4|6][0-9]{7}$|[9][8][5][0-9]{7}$|[9][8][0][1-2][0-9]{6}$|[9][8][0-1][0-9]{7}$/,tollFree:/^([1][6][6][0][0][1][0-9]\d{4})$/}),c.module("esewaSharedApp").constant("StateConstant",{LOGIN:"login",SIGN_UP:"authentication.signup",HOME_MAIN:"main.landing",FORGOT_PASSWORD:"authentication.forgotPassword",CHANGE_PASSWORD:"user.changePassword",CHANGE_MPIN:"user.changeMpin",INITIAL_REQUIREMENT:"main.initialRequirement",LOGIN_CREDENTIALS:"user.secondaryUsers",NOTIFICATIONS:"user.notifications",ACTIVITIES:"user.activities",DEVICES:"user.devices",SET_FORGOT_PASSWORD:"activate.setForgottenPassword",SET_PASSWORD_EMAIL_USER:"activate.setPasswordForEmailUser",MAKE_PAYMENT:"merchant.makePayment",MAKE_PAYMENT_SECOND_STEP:"merchant.makePayment.secondStep",MAKE_PAYMENT_CONFIRMATION:"merchant.makePayment.confirmation",FUND_TRANSFER_DETAIL:"merchant.fundTransfer.detail",TRANSACTIONS:"merchant.transaction",STATEMENTS:"merchant.statements",AIRLINES:"merchant.airlines",INTERNET_BANKING:"fundFrom.internetBanking",MOBILE_BANKING:"fundFrom.mobileBanking",BANK_WITHDRAW:"main.bankWithdraw",WESTERN_UNION:"main.wuPickup",WESTERN_UNION_RECEIVE:"main.wuReceive",AIRLINES_HOME:"airline.new_search",AIRLINES_SEARCH:"airline.new_search",AIRLINES_LIST:"airline.airline_list",AIRLINES_PASSANGER:"merchant.airlines.passenger",AIRLINES_CONFIRM:"merchant.airlines.confirmation",AIRLINES_TICKET:"merchant.airlines.transactionDetail",AIRLINES_NEWSEARCH:"airline.new_search",WU:"static.westernUnion",ABOUT_ESEWA:"static.aboutEsewa",FAQS:"static.faqs",MOBILE_APPS:"static.mobileApps",SMS_SYNTAX:"static.smsSyntax",CONTACT_INFORMATION:"static.contactInformation",SERVICE_LIST:"serviceList",KHANEPANI_LIST:"unifiedkhanepani",HOTEL_HOME:"merchant.hotels",HOTEL_LIST:"merchant.hotels.search",HOTEL_DETAILS:"merchant.hotels.details",HOTEL_BOOKING:"merchant.hotels.confirmation",ORGANIZATION_HOME:"organization.home",BUSSEWA_INQUIRY:"busSewa.inquiry",BUSSEWA_PASSENGER_DETAIL:"busSewa.passenger-detail",BUSSEWA_CONFIRMATION:"busSewa.confirmation",REDEEMREWARD_SCHEME:"redeemReward.scheme",REDEEMREWARD_SHOWCASE:"redeemReward.showcase",REDEEMREWARD_STATEMENT:"redeemReward.statement",REDEEMREWARD_HISTORY:"redeemReward.history",KYC_DETAIL:"user.userKycdetail",KYC_ONE:"user.personalDetails",KYC_TWO:"user.addressInformation",KYC_THREE:"user.documentDetails",KYC_PROFILE:"user.userKycdetail",KYC_PERSONAL_INFORMATION:"userKyc.personalDetails",KYC_ADDRESS_INFOTMATION:"userKyc.addressInformation",KYC_DOCUMENT_DETAILS:"userKyc.documentDetails",KYC_EDIT_PERSONAL_INFORMATION:"userKycEdit.personalDetails",KYC_EDIT_ADDRESS_INFOTMATION:"userKycEdit.addressInformation",KYC_EDIT_DOCUMENT_DETAILS:"userKycEdit.documentDetails",CABLE_CAR_DETAIL:"cableCar.detail",CABLE_CAR_CONFIRMATION:"cableCar.confirmation",CABLE_CAR_MY_TICKET:"cableCar.tickets",ESEWA_REMIT_TRANSACTION_DETAIL:"esewaRemit.transactionDetails",ESEWA_REMIT_SENDER_DETAIL:"esewaRemit.senderDetails",ESEWA_REMIT_RECEIVER_DETAIL:"esewaRemit.receiverDetails",ESEEW_REMIT_CONFIRMATION:"esewaRemit.confirmationDetails",USER_LINKEDACCOUNT_BANKLIST:"user.linkedAccount.bankList",USER_LINKEDACCOUNT_HISTORY:"user.linkedAccount.history",USER_LINKEDACCOUNT_LIST:"user.linkedAccount.list",ESEWA_REMIT_RECEIVER_MTCN:"esewaRemitReceiver.mtcn",ESEWA_REMIT_RECEIVER_TRANSACTION_DETAIL:"esewaRemitReceiver.transactionDetail",ESEWA_REMIT_RECEIVER_RECEIVER_DETAIL:"esewaRemitReceiver.receiverDetail",ESEWA_REMIT_RECEIVER_CONFIRMATION_DETAIL:"esewaRemitReceiver.confirmationDetail",ESEWA_REMIT_DASHBOARD:"esewaRemitDashboard",ESEWA_REMIT_TOTAL_COMMISSION_EARNED:"totalCommissionEarned",ESEWA_REMIT_TOTAL_REMITTANCE_PAYMENT:"totalRemittancePayment",ESEWA_REMIT_TOTAL_SEND_MONEY:"totalSendMoney",ESEWA_REMIT_UPLOAD_RECEIVER_INFO:"uploadReceiverInfo",ESEWA_REMIT_UPLOAD_COMMISSION_INFO:"totalCommissionEarned.upload"}),c.module("esewaSharedApp").controller("AppBadgeController",[function(){function a(){$(function(){$(".badge-container").addClass("badge-container-visible"),$(".close-cross-btn").click(function(){$(".badge-container").hide()})})}var b={android:function(){return navigator.userAgent.match(/Android/i)},ios:function(){return navigator.userAgent.match(/iPad|iPhone|iPod/i)}};(b.android()||b.ios())&&(a(),document.getElementById("badge-content").innerHTML=" <a href='https://esewafonepay.page.link/esewaapp' target='_blank'>Open eSewa in app</a>")}]),c.module("esewaSharedApp").controller("FAQController",["$scope","$stateParams","CDNUrl","CommonService",function(a,b,c,d){a.selectedFaqTitle=b.faqTopic||"Have a question ?",a.faqTopics={},a.faqSubTopics={},a.subTopicList=[],d.getJsonDataFromCdn("faq/faqQuestions").then(function(b){a.faqTopics.topics=b.data}),a.getSubtopics=function(b,c){a.selectedTopic=c,a.selectedSubTopic=null,a.faqSubTopicName=b.topic_name,d.getJsonDataFromCdn("faq/"+a.selectedFaqTitle.toLowerCase()+"FAQSubTopics").then(function(c){a.faqSubTopics=c.data,a.subTopicList=a.faqSubTopics[b.topic_id]})},a.subTopicClicked=function(b){a.selectedSubTopic=b}}]),c.module("esewaSharedApp").controller("ImagePopupController",["$rootScope","$scope","doc","image_src","$modalInstance",function(a,b,c,d,e){b.doc=c,b.image_src=d,b.cancel=function(){e.dismiss()},a.currentModal=e}]),c.module("esewaSharedApp").controller("MiscellaneousStateController",["$state","$scope",function(a,b){b.serviceType=a.params.service_type}]),c.module("esewaSharedApp").controller("SingleDateController",["$scope",function(a){var b,c;a.today=new Date;var d=new Date,e=function(d){a.today=new Date,b&&(a.today=b),c&&(a.maxDateRange=c),d.preventDefault(),d.stopPropagation()};a.openDate=function(b){e(b),a.DateOpened=!0},a.maxDateRange=d.setMonth(d.getMonth()+1),a.setMinDate=function(a){b=a},a.setMaxDate=function(a){c=a}}]),c.module("esewaSharedApp").controller("WebSocketController",["$scope","WebSocketService","$timeout","$state","$rootScope","ecmsg","AUTH_EVENTS","$window","$cookies",function(a,e,f,g,h,i,j,k,l){function m(){return h.domainName&&h.domainName!==d||(h.domainName=""),h.domainName+"/ws/esewa"}a.model={transport:"websocket",messages:[]},"Notification"in b&&"denied"!==Notification.permission&&Notification.requestPermission(function(){});var n,o=e;h.$on(j.socket,function(){a.messageDto={message:"",username:"",time:"",type:""};var d=l.get("authesewa");if(d){var e=d.split(":")[1];c.isDefined(h.userAuth)&&(h.userAuth.uuid=e);var p={url:m(),contentType:"application/json",headers:{token:e},logLevel:"error",transport:"websocket",enableXDR:!0,fallbackTransport:"long-polling",trackMessageLength:!0,reconnectInterval:1e4,enableProtocol:!1,timeout:3e5};p.onMessage=function(b){var c=b.responseBody;if(c){if(a.messageDto=JSON.parse(c),"SESSION_TIMEOUT"===a.messageDto.type||"LOGOUT"===a.messageDto.type)return void a.processLogout();a.messageDto.type&&(a.processBalanceUpdate(a.messageDto.type),a.messageDto.message&&a.notifyUser(a.messageDto.message,a.messageDto.type,a.messageDto.time))}},n=o.subscribe(p,{transports:["xhr-streaming"]});var q="";a.notifyUser=function(a,c,d){if(h.message.success=a,d)return void i.info(a,"");var e={body:a,icon:"common/images/esewa_logo.png",requireInteraction:!1},j="eSewa";"Notification"in b?"granted"===Notification.permission?(q=new Notification(j,e),f(function(){q.close()},1e4)):"denied"!==Notification.permission&&Notification.requestPermission(function(b){"granted"===b?k.navigator.serviceWorker.ready.then(function(){q=new Notification(j,e),f(function(){q.close()},1e4)}):i.info(a,"")}):i.info(a,""),q?(q.onclick=function(){k.focus(),q.close(),"FUND_RECEIVE"===c||"BANK_LOAD"===c||"transaction"===c?g.go("merchant.statements"):"KYC"===c?g.go("user.detail"):g.go("main.landing")},f(function(){q.close()},1e4)):i.info(a,"")},a.processBalanceUpdate=function(a){h.$broadcast(j.getBalanceAndRewards),"BATCH_PAYMENT"===a&&g.reload()},a.processLogout=function(){h.$broadcast(j.notAuthorized)}}})}]),c.module("esewaSharedApp").directive("ecMiniLoadingBar",[function(){return{restrict:"E",replace:!0,scope:{showLoadingBar:"="},template:'<div ng-if="showLoadingBar" class="text-center"><span class="glyphicon glyphicon-refresh">Loading..........</span></div>'}}]),c.module("esewaSharedApp").directive("ecMiniLoadingBarTwo",[function(){return{restrict:"E",scope:{showLoadingBar:"="},template:'<div class="loading-design"><img src="common/images/loader.gif" alt="" style="position: fixed; top:50%; left: 50%"></div>'}}]),c.module("esewaSharedApp").directive("focusOn",["$timeout",function(a){return{restrict:"A",link:function(b,c,d){b.$watch(d.focusOn,function(b){a(function(){b?c[0].focus():c[0].blur()})})}}}]),c.module("esewaSharedApp").directive("loadingBar",[function(){return{restrict:"AE",replace:!0,scope:{showLoadingBar:"="},template:' <div class="col-md-12" style="padding-left: 0px !important;"> <div class="loading-gif" ng-if="showLoadingBar"> </div> <div class="clearfix"></div> </div>'}}]),c.module("esewaSharedApp").directive("ecAddressPicker",["CDNUrl",function(a){return{restrict:"E",templateUrl:a.url+"/html/templates/kyc/ec_address_picker_3.37.0.html",scope:{ecId:"@",ecZones:"=",ecProvinces:"=",ecData:"=",ecKey:"@",ecDisabled:"="},link:function(a){a.$watch("ecData",function(b,c){b&&(a.addressData=a.ecData[a.ecKey],null===b[a.ecKey]&&(a.addressData={zone_id:"",district_id:"",vdc_municipality_id:"",tole:"",ward_number:"",is_new_address:!0}))},!0),a.$watch("addressData",function(b,d){d&&b?(b.zone_id!==d.zone_id&&a.getDistrict(),b.district_id!==d.district_id&&a.getVdcMunicipalities()):b&&!d&&(b.zone_id&&a.getDistrict(),b.district_id&&a.getVdcMunicipalities()),c.isDefined(a.ecData[a.ecKey])&&(a.ecData[a.ecKey]=a.addressData)},!0)},controller:["$rootScope","$scope","AddressService",function(a,b,c){function d(c,d,e,f,g){c(e).then(function(a){b[d]=a.plain(),"function"==typeof f&&f(a.plain())},function(b){a.showErrorSuccessMessage(b,!0),"function"==typeof g&&g(b)})}function e(a){return{zone_id:"",district_id:"",vdc_municipality_id:"",tole:"",ward_number:"",is_new_address:a}}b.districts=[],b.vdcMunicipalities=[],b.setAddressType=function(a){b.addressData=e(a)},b.getDistrict=function(){b.addressData.zone_id&&d(c.getDistrict,"districts",b.addressData.zone_id)},b.getVdcMunicipalities=function(){b.addressData.district_id&&d(c.getVdcs,"vdcMunicipalities",b.addressData.district_id)}}]}}]),c.module("esewaSharedApp").directive("ecCountDown",["$interval",function(a){return{restrict:"E",replace:!0,scope:{startCountDown:"=",time:"=",onStart:"&",onEnd:"&",autoStart:"=",timeExceedWarningText:"@",textWithTimer:"@"},template:'<div class="ec-count-down-timer" style="padding:0; font-size: 16px;" ng-class="class"><span ng-show="remainingTime" class="before-timer-text" style="    font-size: 12px;\n    line-height: 14px;\n    color: #3C444C;"><strong>{{textWithTimer}} </strong></span><span ng-show="remainingTime" class="remaining-time" style="font-size: 16px;\nline-height: 12px;color: #62BB46;font-weight: 600;"> <i class="fa fa-clock-o" aria-hidden="true"></i> {{remainingTime | secondsToTime : "less-than"}}</span><span class="errors" ng-show="stopTimer"> <i style="color: red; font-size: 10px;" class="fa fa-exclamation-circle fa-xs"aria-hidden="true"></i>{{timeExceedWarningText}}.</span></div>',link:function(b){function c(){b.stopTimer=!1,b.onStart&&b.onStart(),b.remainingTime=b.time;var c=a(function(){if(0===b.remainingTime)return b.stopTimer=!0,a.cancel(c),void(b.onEnd&&b.onEnd());b.remainingTime--},1e3)}b.$watch("startCountDown",function(){b.startCountDown&&c()})}}}]),c.module("esewaSharedApp").directive("ecDirectDebit",["CDNUrl","$rootScope","$http","$modal",function(a,b,c,d){return{restrict:"E",scope:{buttonText:"=",sendBankOtp:"&",isBankNeedOtp:"=",miscScope:"=",setFn:"&"},templateUrl:a.url+"/html/templates/direct_debit_3.38.0.0.html",link:function(c,e){c.mpinVerification=function(){c.modalInstance=d.open({templateUrl:a.url+"/html/templates/mpin_or_password_verification_modal_3.38.0.0.html",controller:"MpinPasswordModalController",size:"md",backdrop:"static",scope:c})},c.setFn({mpinFn:c.mpinVerification}),c.image=b.getImage("logos/esewa-icon-large.png")},controller:["$scope","LinkedAccountService","DirectDebitService","$modal","StateConstant","PaymentConstant",function(c,d,e,f,g,h){function i(){function a(){var a=c.miscScope.paymentOptionsResponse||[{},{}];c.linkedAccounts=a[1].options,c.totalLinkedAccount=c.linkedAccounts.length,c.isBankNeedOtp=c.linkedAccounts.send_otp,"Airline"===c.miscScope.product&&k(),j()}a()}function j(){1!==c.totalLinkedAccount||c.linkedAccounts[0].enabled?document.getElementById("linkedAccountsOption").style.pointerEvents="all":document.getElementById("linkedAccountsOption").style.pointerEvents="none"}function k(){1===c.totalLinkedAccount&&c.linkedAccounts[0].enabled?c.miscScope.selectedBankAccountDetails=c.linkedAccounts[0]:(0===c.totalLinkedAccount||1===c.totalLinkedAccount&&!c.linkedAccounts[0].enabled)&&(c.miscScope.selectedBankAccountDetails={}),c.miscScope.totalPayableAmount<=b.userBalance.balance-b.userBalance.lienBalance?(c.isShowPayViaEsewa=!0,c.buttonText=h.WALLET_LABEL,c.paymentOption[0].isPaymentViaeSewa=!0,c.paymentOption[1].isPaymentViaLinkedAccount=!1,document.getElementById("payViaEsewaOption").style.pointerEvents="all"):(c.isShowPayViaEsewa=!1,c.buttonText=h.OTHER_PAYMENT_LABEL,c.paymentOption[0].isPaymentViaeSewa=!1,c.paymentOption[1].isPaymentViaLinkedAccount=!0,document.getElementById("payViaEsewaOption").style.pointerEvents="none")}c.paymentOption=[{type:h.DEFAULT_PAYMENT_LABEL,isPaymentViaeSewa:!0},{type:h.LINKED_ACCOUNT_PAYMENT_LABEL,isPaymentViaLinkedAccount:!1},{type:h.MOBILE_BANKING_LABEL,isPaymentViaMobileBanking:!1}],i();var l=!1,m=function(b){c.modalInstance=f.open({templateUrl:a.url+"/html/templates/direct_debit_modal_3.38.0.0.html",size:b,scope:c})};c.selectPaymentOption=function(a,b){switch(a.toLowerCase()){case h.DEFAULT_PAYMENT_LABEL:c.buttonText=h.WALLET_LABEL,c.paymentOption[0].isPaymentViaeSewa=!0,c.paymentOption[1].isPaymentViaLinkedAccount=!1;break;case h.LINKED_ACCOUNT_PAYMENT_LABEL:switch(c.totalLinkedAccount){case 0:m("md");break;case 1:c.paymentOption[0].isPaymentViaeSewa=!1,c.paymentOption[1].isPaymentViaLinkedAccount=!0,c.buttonText=h.OTHER_PAYMENT_LABEL,c.miscScope.selectedBankAccountDetails=c.linkedAccounts[0].enabled?b:{};break;default:l?(c.paymentOption[0].isPaymentViaeSewa=!1,c.paymentOption[1].isPaymentViaLinkedAccount=!0,c.buttonText=h.OTHER_PAYMENT_LABEL):m("md")}}},c.changeLinkedAccount=function(){m("md")},c.selectPayment=function(a){(a||{}).enabled&&(l=!0,c.paymentOption[0].isPaymentViaeSewa=!1,c.paymentOption[1].isPaymentViaLinkedAccount=!0,c.buttonText=h.OTHER_PAYMENT_LABEL,c.multiLinkedAccounts=a,c.miscScope.selectedBankAccountDetails=a,c.linkedAccounts.forEach(function(a){a.display_name===c.multiLinkedAccounts.display_name&&(c.selectedAccount=c.multiLinkedAccounts.display_name)}),c.closeModal())},c.otpVerification=function(){c.modalInstance=f.open({templateUrl:a.url+"/html/templates/v1/otp_verification_modal.html",size:"md",scope:c})},c.closeModal=function(){c.modalInstance.close()},c.goToState=function(){b.goToState(g.USER_LINKEDACCOUNT_LIST)}}]}}]),c.module("esewaSharedApp").directive("ecFileDragAndDrop",["CDNUrl",function(a){return{restrict:"E",templateUrl:a.url+"/html/templates/kyc/ec_file_drag_and_drop.html",transclude:!1,replace:!0,require:"ngModel",scope:{ngModel:"=",ecId:"=?",ecFileName:"=?",ecFileStatus:"=?",ecFileUrl:"=?",ecFileRemarks:"=?",ecFileAccept:"=",ecDataMaxFileSize:"=",ecSupportText:"=",ecDisabled:"=?",ecRequired:"=?",ecIsRejected:"=?"},link:function(a,b,d){function e(a){return null!==a&&a.preventDefault(),a.originalEvent.dataTransfer.setData("text/plain","dummy"),a.originalEvent.dataTransfer.effectAllowed="move",!1}function f(b){a.$apply(function(){a.fileInfo.error=b})}function g(b){return b/1024/1024<a.ecDataMaxFileSize}function h(a){return void 0===m||""===m||m.indexOf(a)>-1}function i(b,c){a.$apply(function(){a.fileInfo.src=b,d.$modelValue=c,d.$viewValue=c,a.ngModel=c,a.fileData=c})}function j(b){var c,d,e;b.name,d=g(b.size),e=h(b.type),d&&e?(c=new FileReader,a.styleData.style={},c.onloadstart=function(){a.styleData.style.width="0%"},c.onprogress=function(b){var c=Math.round(b.loaded/b.total*100);c<100&&(a.styleData.style.width=c+"%")},c.onload=function(a){return i(a.target.result,b)},c.readAsDataURL(b)):d||e?e?d||f("File must be smaller than "+a.ecDataMaxFileSize+" MB"):f("Invalid file type.  File must be one of following types "+m):f("Invalid file type and size. File must be one of following types "+m+" and be smaller than "+a.ecDataMaxFileSize+" MB")}function k(a,b){for(var c=a.split(","),d=c[0].match(/:(.*?);/)[1],e=atob(c[1]),f=e.length,g=new Uint8Array(f);f--;)g[f]=e.charCodeAt(f);return new File([g],b,{type:d})}function l(a,b){var c=new XMLHttpRequest;c.onload=function(){var a=new FileReader;a.onloadend=function(){b(a.result)},a.readAsDataURL(c.response)},c.open("GET",a,!0),c.responseType="blob",c.send()}a.ecDisabled=c.isDefined(a.ecDisabled)&&a.ecDisabled;var m=a.ecFileAccept,n=c.isDefined(a.ecDisabled)&&a.ecDisabled;a.fileInfo={src:a.ecFileUrl},a.handleClick=function(b){a.ecDisabled&&b.preventDefault()},a.$watch("ecFileUrl",function(){a.fileInfo={src:a.ecFileUrl},a.ecFileUrl?l(a.ecFileUrl,function(b){var c=k(b,a.ecFileName||"eSewa");a.fileInfo.src=b,a.fileData=c,a.$$phase||a.$apply()}):(a.fileInfo={},a.fileData=null)}),a.styleData={},a.removeFile=function(){n||(a.ngModel=null,a.fileInfo={},a.styleData={},a.fileData=null,b.find("input").val(""))},n||(b.bind("dragover",e),b.bind("dragenter",e),b.bind("change",function(a){var b=a.target.files[0];f(""),j(b)}),b.bind("drop",function(a){f(""),null!==a&&a.preventDefault(),j(a.originalEvent.dataTransfer.files[0])}),a.ngModel&&j(a.ngModel))}}}]),c.module("esewaSharedApp").directive("ecPromoCode",["CDNUrl",function(a){return{restrict:"E",replace:!0,scope:{properties:"=",productName:"=?",class:"@",productId:"=?",productType:"=?",amount:"=?",miscScope:"=?",moduleId:"=",api:"@",additionalProperties:"&?",isNonTransactionEvent:"@",setPromoCodeIn:"=?",hidePromoCodeRewards:"=?"},templateUrl:a.url+"/html/templates/promcodeTemplate_3.36.0.html",link:function(a){a.applyStatus="Apply",a.startTimer=!1,a.showPromoFeild=!1,a.promoCodeDetails={},a.miscScope=a.miscScope||{},a.hidePromoCodeRewards=a.hidePromoCodeRewards||!1},controller:["$scope","PromoCodeService","$timeout","$modal",function(b,e,f,g){function h(a){if(!b.isNonTransactionEvent){var c=document.getElementsByName("amount")||[];c.length&&(a?c[0].setAttribute("disabled",!0):c[0].removeAttribute("disabled"))}}function i(){b.properties.promo_code="",b.properties.booking_uuid="",b.miscScope.promoCodeRewards={},b.promoCodeDetails={},b.applyStatus="Apply",h(!1)}function j(a){var b=Object.assign({},a);return delete b.booking_uuid,delete b.promo_code,b}function k(a){b.applyStatus="Applying",b.expiryTime=0,b.errorMessage="",i();var d={promo_code:a,product_id:b.productId,amount:b.amount,product_type:b.productType,module_id:b.moduleId},f=j(b.properties);if(Object.keys(f).length&&(c.forEach(f,function(a,b){"object"==typeof a&&delete f[b]}),d.properties=f),"function"==typeof b.additionalProperties){var g=b.additionalProperties();d=Object.assign(d,g)}e.bookPromoCode(d,b.api).then(function(c){if(h(!0),b.miscScope&&(b.miscScope.promoCodeRewards=c.rewards),b.setPromoCodeIn&&(b.setPromoCodeIn.promo_code=a),b.promoCodeDetails=c.plain(),b.properties.booking_uuid=c.booking_uuid,b.properties.promo_code=a,b.applyStatus="Applied",c.expiry_date){var d=Math.floor((c.expiry_date-c.booked_date)/1e3);d>0&&(b.expiryTime=d,b.startTimer=!0)}},function(a){b.errorMessage=a.error_message?a.error_message:a.data.error_message,i()})}b.properties=b.properties||{},b.closeModal=function(){b.$modalInstance.dismiss("cancel")},b.$watch("miscScope",function(){b.miscScope.resetPromoCode&&(delete b.miscScope.resetPromoCode,
b.timeExpiredCallback(10),b.showPromoFeild=!1,b.errorMessage=d)},!0),b.showTermsAndConditions=function(){b.$modalInstance=g.open({templateUrl:a.url+"/html/templates/promoTermsAndConditions.html",size:"sm",backdrop:"static",keyboard:!1,scope:b})},b.timeExpiredCallback=function(a){i(),b.promoCode="",f(function(){b.startTimer=!1},a||3e3)},b.bookPromoCode=function(a){b.isNonTransactionEvent?k(a):b.amount?k(a):b.errorMessage="You must set amount first to apply this promo-code."},b.getEventTypeMessage=function(a){var b="Applied successfully. Please ";if(a){if("REGISTRATION"===a)return b+"complete your registration before the time expires.";if("KYC_VERIFIED"===a||"KYC"===a)return b+"submit your KYC before the time expires."}return b+"confirm your payment before the time expires."}}]}}]),c.module("esewaSharedApp").directive("typeaheadFocus",function(){return{require:"ngModel",link:function(a,b,c,d){b.bind("click",function(){d.$viewValue;" "==d.$viewValue&&(d.$setViewValue(null),d.$render()),d.$setViewValue(" "),d.$render()}),a.emptyOrMatch=function(a,b){return" "==b||a.indexOf(b)>-1}}}}),c.module("esewaSharedApp").factory("FileSaverFactory",[function(){var a;return{saveAs:a||function(a){if("undefined"==typeof navigator||!/MSIE [1-9]\./.test(navigator.userAgent)){var b=a.document,c=function(){return a.URL||a.webkitURL||a},e=b.createElementNS("http://www.w3.org/1999/xhtml","a"),f="download"in e,g=function(a){var b=new MouseEvent("click");a.dispatchEvent(b)},h=/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),i=a.webkitRequestFileSystem,j=a.requestFileSystem||i||a.mozRequestFileSystem,k=function(b){(a.setImmediate||a.setTimeout)(function(){throw b},0)},l="application/octet-stream",m=0,n=500,o=function(b){var d=function(){"string"==typeof b?c().revokeObjectURL(b):b.remove()};a.chrome?d():setTimeout(d,n)},p=function(a,b,c){b=[].concat(b);for(var d=b.length;d--;){var e=a["on"+b[d]];if("function"==typeof e)try{e.call(a,c||a)}catch(f){k(f)}}},q=function(a){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\ufeff",a],{type:a.type}):a},r=function(b,k,n){n||(b=q(b));var r,s,t,u=this,v=b.type,w=!1,x=function(){p(u,"writestart progress write writeend".split(" "))},y=function(){if(s&&h&&"undefined"!=typeof FileReader){var e=new FileReader;return e.onloadend=function(){var a=e.result;s.location.href="data:attachment/file"+a.slice(a.search(/[,;]/)),u.readyState=u.DONE,x()},e.readAsDataURL(b),void(u.readyState=u.INIT)}if(!w&&r||(r=c().createObjectURL(b)),s)s.location.href=r;else{a.open(r,"_blank")===d&&h&&(a.location.href=r)}u.readyState=u.DONE,x(),o(r)},z=function(a){return function(){if(u.readyState!==u.DONE)return a.apply(this,arguments)}},A={create:!0,exclusive:!1};return u.readyState=u.INIT,k||(k="download"),f?(r=c().createObjectURL(b),void setTimeout(function(){e.href=r,e.download=k,g(e),x(),o(r),u.readyState=u.DONE})):(a.chrome&&v&&v!==l&&(t=b.slice||b.webkitSlice,b=t.call(b,0,b.size,l),w=!0),i&&"download"!==k&&(k+=".download"),(v===l||i)&&(s=a),j?(m+=b.size,void j(a.TEMPORARY,m,z(function(a){a.root.getDirectory("saved",A,z(function(a){var c=function(){a.getFile(k,A,z(function(a){a.createWriter(z(function(c){c.onwriteend=function(b){s.location.href=a.toURL(),u.readyState=u.DONE,p(u,"writeend",b),o(a)},c.onerror=function(){var a=c.error;a.code!==a.ABORT_ERR&&y()},"writestart progress write abort".split(" ").forEach(function(a){c["on"+a]=u["on"+a]}),c.write(b),u.abort=function(){c.abort(),u.readyState=u.DONE},u.readyState=u.WRITING}),y)}),y)};a.getFile(k,{create:!1},z(function(a){a.remove(),c()}),z(function(a){a.code===a.NOT_FOUND_ERR?c():y()}))}),y)}),y)):void y())},s=r.prototype,t=function(a,b,c){return new r(a,b,c)};return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(a,b,c){return c||(a=q(a)),navigator.msSaveOrOpenBlob(a,b||"download")}:(s.abort=function(){var a=this;a.readyState=a.DONE,p(a,"abort")},s.readyState=s.INIT=0,s.WRITING=1,s.DONE=2,s.error=s.onwritestart=s.onprogress=s.onwrite=s.onabort=s.onerror=s.onwriteend=null,t)}}("undefined"!=typeof self&&self||void 0!==b&&b||this.content)}}]),c.module("esewaSharedApp").filter("amount",["$filter",function(a){return function(b){return b%1!=0?a("number")(_.round(b,2),2):a("number")(b,2)}}]),c.module("esewaSharedApp").filter("cdn",["CDNUrl",function(a){return function(b){return a.url+"/"+b}}]),c.module("esewaSharedApp").filter("capitalize",[function(){return function(a){if(a)return a=a.split("_").join(" "),a?a.charAt(0).toUpperCase()+a.substr(1).toLowerCase():""}}]),c.module("esewaSharedApp").filter("DateFormat",["$filter",function(a){var b=a("date");return function(a){return b(a,"d MMM y, h:mm a")}}]),c.module("esewaSharedApp").filter("DateFormatDay",["$filter",function(a){var b=a("date");return function(a){var c=new Date(a),d=new Date;return d.setFullYear(c.getFullYear()),d.setMonth(c.getMonth()),d.setDate(c.getDate()),b(d,"d MMM y, h:mm a")}}]),c.module("esewaSharedApp").filter("DateFormatTime",["$filter",function(a){var b=a("date");return function(a){return b(a)}}]),c.module("esewaSharedApp").filter("channel",[function(){return function(a){switch(a){case"WEB":return"Web";case"GPRS":return"GPRS";default:return a}}}]),c.module("esewaSharedApp").filter("DateFormatOnlyDate",["$filter",function(a){var b=a("date");return function(a){var c=new Date(a),d=new Date;return d.setFullYear(c.getFullYear()),d.setMonth(c.getMonth()),d.setDate(c.getDate()),b(d,"d MMM y")}}]),c.module("esewaSharedApp").filter("DateFormatOnlyTime",["$filter",function(a){var b=a("date");return function(a){var c=new Date(a),d=new Date;return d.setFullYear(c.getFullYear()),d.setMonth(c.getMonth()),d.setDate(c.getDate()),b(c,"h:mm a")}}]),c.module("esewaSharedApp").filter("DateFormatFilter",["$filter",function(a){var b=a("date");return function(a){var c=new Date(a),d=new Date;return d.setFullYear(c.getFullYear()),d.setMonth(c.getMonth()),d.setDate(c.getDate()),b(c,"h:mm a")}}]),c.module("esewaSharedApp").filter("filesize",function(){return function(a){return isNaN(a)&&(a=0),a<1024?a+" Bytes":(a/=1024)<1024?a.toFixed(2)+" Kb":(a/=1024)<1024?a.toFixed(2)+" Mb":(a/=1024)<1024?a.toFixed(2)+" Gb":(a/=1024,a.toFixed(2)+" Tb")}}),c.module("esewaSharedApp").filter("firstLetterOfWord",[function(){return function(a){return a?a.split("")[0].toUpperCase():"E"}}]),c.module("esewaSharedApp").filter("gender",[function(){return function(a){switch(a){case"M":return"MALE";case"F":return"FEMALE";case"0":return"N/A";default:return a}}}]),c.module("esewaSharedApp").filter("html",["$sce",function(a){return function(b){return a.trustAsHtml(b)}}]),c.module("esewaSharedApp").filter("LogoInsert",["$sce",function(a){return function(b){if(b){var c;return c=b.replace("Linux","<img src='/common/images/icons/linux.png' title='Linux' />"),c=c.replace("Chrome","<img src='/common/images/icons/chrome.png' title='Google Chrome'/>"),c=c.replace(","," "),c=c.replace(","," "),c=c.replace("Mozilla","<img src='/common/images/icons/firefox.png' title='Mozilla Firefox' />"),c=c.replace("Opera","<img src='/common/images/icons/opera.png' title='Opera' />"),c=c.replace("Windows","<img src='/common/images/icons/microsoft_windows.png' title='Windows' />"),a.trustAsHtml(c)}return b}}]).filter("UrlCode",[function(){return function(a){var b="http://",c="https://";if(a)if(a.substr(0,b.length)!==b&&a.substr(0,c.length)!==c)a=b+a;else if(null===a)return a;return a}}]),c.module("esewaSharedApp").filter("nepaliDigit",[function(){return function(a){if(void 0!==a){for(var b=["1","2","3","4","5","6","7","8","9","0"],c=["१","२","३","४","५","६","७","८","९","०"],d=a.toString(),e=0;e<b.length;e++)d=d.replace(new RegExp(b[e],"g"),c[e]);return d}}}]),c.module("esewaSharedApp").filter("randomSrc",[function(){return function(a){if(a)return a+"?r="+Math.round(999999*Math.random())}}]),c.module("esewaSharedApp").filter("reverse_camel_case",[function(){function a(a){for(var b=a.toLowerCase().split(" "),c=0;c<b.length;c++)b[c]=b[c].charAt(0).toUpperCase()+b[c].substring(1);return b.join(" ")}return function(b){if(b){var c;return c=b.replace(/([A-Z])/g," $1"),c=c.charAt(0).toUpperCase()+c.slice(1),c=a(c),c=c.replace("Esewa","eSewa"),c=c.replace("esewa","eSewa"),c=c.split("_").join(" ")}}}]),c.module("esewaSharedApp").filter("secondsToTime",[function(){function a(a,b){return a?a<10?"0"+a+b:a+b:""}return function(b,c){if("number"!=typeof b||b<0)return"00:00:00";var d=Math.floor(b/3600),e=Math.floor(b%3600/60),f=Math.floor(b%60);return c&&e>=1?f?"Less than "+(1*Math.floor(b%3600/60)+1)+"min":"Less than "+e+"min":a(d,"hr ")+a(e,"min ")+a(f,"sec.")}}]),c.module("esewaSharedApp").filter("timeago",[function(){return function(a,b){var c=function(a,b,c){var d=$.isFunction(a)?a(b,j):a,e=c.numbers&&c.numbers[b]||b;return d.replace(/%d/i,e)},e=(new Date).getTime();a&&(a=a.replace(/-/g,"/"));var f,g=new Date(a).getTime(),h=b||!1,i={prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years"},j=e-g,k=Math.abs(j)/1e3,l=k/60,m=l/60,n=m/24,o=n/365,p=i.wordSeparator===d?" ":i.wordSeparator,q=i.prefixAgo,r=i.suffixAgo;return h&&j<0&&(q=i.prefixFromNow,r=i.suffixFromNow),f=k<45&&c(i.seconds,Math.round(k),i)||k<90&&c(i.minute,1,i)||l<45&&c(i.minutes,Math.round(l),i)||l<90&&c(i.hour,1,i)||m<24&&c(i.hours,Math.round(m),i)||m<42&&c(i.day,1,i)||n<30&&c(i.days,Math.round(n),i)||n<45&&c(i.month,1,i)||n<365&&c(i.months,Math.round(n/30),i)||o<1.5&&c(i.year,1,i)||c(i.years,Math.round(o),i),$.trim([q,f,r].join(p))}}]),c.module("esewaSharedApp").filter("to_trusted_html",["$sce",function(a){return function(b){return a.trustAsHtml(b)}}]),c.module("esewaSharedApp").filter("uiSelectFilter",[function(){return function(a,b){var d=[];if(c.isArray(a)){var e=Object.keys(b);a.forEach(function(a){for(var c=!1,f=0;f<e.length;f++){var g=e[f],h=b[g].toLowerCase();if(a[g]&&-1!==a[g].toString().toLowerCase().indexOf(h)){c=!0;break}}c&&d.push(a)})}else d=a;return d}}]),c.module("esewaSharedApp").service("CommonService",["$http","CDNUrl",function(a,b){this.getHiddenStatDetailProps=function(c){return a.get(b.url+"/data/hiddenStatDetailProps.json")},this.getJsonDataFromCdn=function(c){return a.get(b.url+"/data/"+c+".json")},this.isOfTypeFunction=function(a){return a&&"function"==typeof a},this.isOfTypeObject=function(a){return a&&"object"==typeof a}}]),c.module("esewaSharedApp").service("InformationService",["Restangular",function(a){var b=a.one("banks");this.getInformation=function(b){return a.one("info_message").one(b+"").get()},this.getInternetBankingDetails=function(){return b.one(!0).get()},this.getMobileBankingDetails=function(){return b.one(!1).get()}}]),c.module("esewaSharedApp").service("PaginationService",[function(){this.getDefaultPagination=function(){return{page:0,size:15}},this.getPagination=function(a,b){return{page:a,size:b}}}]),c.module("esewaSharedApp").service("PromoCodeService",["Restangular",function(a){var b=a.one("auth");this.bookPromoCode=function(c,d){return d?a.one(d).withHttpConfig({selfHandleLoadingBar:!0}).customPOST(c):b.one("payments/promocode").withHttpConfig({selfHandleLoadingBar:!0}).customPOST(c)}}]),c.module("esewaSharedApp").service("ValidationService",["RegexConstant",function(a){this.checkNameValid=function(b,c){if(b){if(a.fullname.test(b))return this.separateNames(b)}else if(c)return!0;return!1},this.checkPANValid=function(b){return!b||!a.startZero.test(b)&&a.panNo.test(b)},this.checkLandlineValid=function(b){return!b||!a.startZero.test(b)&&(8===b.length?a.landline.test(b):a.landline9.test(b))},this.checkToleValid=function(b){return!!b&&a.tole.test(b)},this.checkWardValid=function(b){return!!b&&(!a.startZero.test(b)&&a.ward.test(b))},this.checkDOBValid=function(b){return!!b&&a.dob.test(b)},this.checkMobileValid=function(b){return!!b&&a.mobileNo.test(b)},this.checkPhoneValid=function(b){return!!b&&(a.mobileNo.test(b)||a.landline.test(b)||a.landline9.test(b)||a.tollFree.test(b))},this.checkEmailValid=function(b){return!!b&&a.email.test(b)},this.checkUsernameValid=function(b){return!!b&&a.username.test(b)},this.separateNames=function(a){a=a.replace(/ +/g," "),a=a.replace(/ /g,"|");var b=a.split("|")[0],c="",d="";if(a.split("|").length>2)c=a.split("|")[1].replace(/ +/g,""),d=a.split("|")[2].replace(/ +/g,"");else{if(!(a.split("|").length>1))return!1;d=a.split("|")[1].replace(/ +/g,"")}return[b,c,d]},this.showRejectedField=function(a,b,d){var e="";"first_name"===b||"last_name"===b||"middle_name"===b?b="full_name":"permanent_address_vdc"===b?e=c.element(c.element('[ng-model="vdc"]')[0]):"permanent_address_ward"===b?e=c.element(c.element('[ng-model="ecWardNo"]')[0]):"permanent_address_tole"===b?e=c.element(c.element('[ng-model="ecTole"]')[0]):"current_address_vdc"===b?e=c.element(c.element('[ng-model="vdc"]')[1]):"current_address_ward"===b?e=c.element(c.element('[ng-model="ecWardNo"]')[1]):"current_address_tole"===b&&(e=c.element(c.element('[ng-model="ecTole"]')[1])),e&&(e.find(".error").html(""),e.addClass("errorField"),e.parent().append('<div class="error">'+d+"</div>")),"date_of_birth_bs"===b||"date_of_birth_ad"===b?(c.element('[ng-model="ecType"]').addClass("errorField"),c.element('[ng-model="year"]').addClass("errorField"),c.element('[ng-model="month"]').addClass("errorField"),c.element('[ng-model="day"]').addClass("errorField"),c.element('[ng-model="ecType"]').parent().append('<div class="error" style="padding-left: 200px">'+d+"</div>")):(e=c.element('[ng-model="'+a+"."+b+'"]'),e.addClass("errorField"),e.parent().append('<div class="error">'+d+"</div>"))}}]),c.module("esewaSharedApp").service("WebSocketService",["$rootScope",function(a){var b=["onOpen","onClientTimeout","onReopen","onMessage","onClose","onError"],d=b;return d.push("onTransportFailure"),d.push("onReconnect"),{subscribe:function(e){var f={};return c.forEach(e,function(c,g){"function"==typeof c&&d.indexOf(g)>=0?b.indexOf(g)>=0?f[g]=function(b){a.$apply(function(){e[g](b)})}:"onTransportFailure"===g?f.onTransportFailure=function(b,c){a.$apply(function(){e.onTransportFailure(b,c)})}:"onReconnect"===g&&(f.onReconnect=function(b,c){a.$apply(function(){e.onReconnect(b,c)})}):f[g]=e[g]}),atmosphere.subscribe(f)}}}]),c.module("esewaSharedApp").constant("AUTH_EVENTS",{loginSuccess:"auth-login-success",loginFailed:"auth-login-failed",logoutSuccess:"auth-is_logout-success",sessionTimeout:"auth-session-timeout",notAuthenticated:"auth-not-authenticated",notAuthorized:"auth-not-authorized",changePassword:"CHANGE_PASSWORD",personalDetail:"PERSONAL_DETAIL",generalDetail:"GENERAL_DETAIL",identityDetail:"IDENTITY_DETAIL",notifications:"NOTIFICATIONS",initialRequirement:"INITIAL_REQUIREMENT",welcomeForm:"WELCOME_FORM",getBalanceAndRewards:"get-balance-and-rewards",getShowcases:"get-show-case",getFeaturedShowcases:"get-featured-show-case",getMenus:"get-menus",getProductCommission:"get-product-commission",information:"information",socket:"socket",devGruntPort:8e3,devServerPort:8100,fcmNotificationCount:"FCM_NOTIFICATION_COUNT"}),c.module("esewaSharedApp").constant("CDNUrl",{url:"https://cdn.esewa.com.np/ui",defaultAccountUrl:"https://cdn.esewa.com.np/ui/static/images/account_picture.png",welcomePage:"https://cdn.esewa.com.np/ui/html/WELCOME_ESEWA.html"}),c.module("esewaSharedApp").constant("INFORMATION",{primaryRegistration:"PRIMARY_REGISTRATION_INFO",primaryRegistrationToken:"PRIMARY_REGISTRATION_TOKEN_INFO",primaryRegistrationPasswordValidation:"PRIMARY_REGISTRATION_CREATE_PASSWORD_INFO",secondaryRegistration:"SECONDARY_REGISTRATION_INFO",secondaryRegistrationToken:"SECONDARY_REGISTRATION_TOKEN_INFO",secondaryRegistrationPasswordValidation:"SECONDARY_REGISTRATION_CREATE_PASSWORD_INFO",kycPersonal:"KYC_PERSONAL_INFO",kycGeneral:"KYC_GENERAL_INFO",kycIdentity:"KYC_IDENTITY_INFO",userChangePassword:"USER_CHANGE_PASSWORD_INFO",userChangeMPIN:"USER_CHANGE_PIN_INFO",userPasswordExpire:"USER_PASSWORD_EXPIRE_INFO",userStatement:"USER_STATEMENT_INFO",forgotPassword:"FORGOT_PASSWORD",forgotPasswordValidation:"FORGOT_PASSWORD_VALIDATION",notification:"NOTIFICATION"}),c.module("esewaSharedApp").constant("LabelConstant",{fullName:"Name",permanentAddress:"Permanent Address",currentAddress:"Current Address",fatherName:"Father's or Husband's Name",motherName:"Mother's Name",spouseName:"Spouse's Name",grandFatherName:"Grand Father's or Father-in-law's Name",panNo:"PAN No",landlineNo:"Landline No",occupation:"Occupation",dateOfBirth:"Date of Birth",gender:"Gender",setSameAsPermanent:"Same as permanent"}),c.module("esewaSharedApp").constant("MessageConstant",{dataFetchError:"Error while fetching data. Please, try again later.",serviceNotAvailable:"Service is currently unavailable. please, try again later.",notAuthorized:"You donot have access to view the contents"}),c.module("esewaSharedApp").constant("ResponseConstant",{userActivitiesActivities:"userActivities.activities",activityTime:"activity_time",activityDate:"activity_date",showcases:"showcases.offers",featuredShowcases:"featuredShowcases.featuredOffers"})}(window.jQuery,window,window.angular);})(window.jQuery, window, window.angular);